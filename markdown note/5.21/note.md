## Fortran90/95的特征
·加强了程序的可读性、可维护性：淘汰所有转移语句，用新的控制结构使程序结构化；增加了结构块、模块及过程的调用灵活形式；增加新的数据种别说明，可移植性更强。·发展了现代算法功能：加强了数组的算法功能，引进了多种数组操作功能与概念，增加了动态存储功能。
·扩大与编程者的友好界面：新的编程形式减少了烦琐与格式束缚，接近自然语言与公式演算。允许在字符数据中选取不同种别，在字符串中可使用各国文字（例如汉字），还可任意使用化学、物理、数学的各种专业字符。

## 为什么使用 Fortran 
1. 与其他语言的横向对比
- 设计目标
- 代码效率
- 上手的难易度
2. 历史传承
- 最早的高级语言
- 大量的遗留代码
3. 对其他计算机语言学习的作用

## Fortran 程序通常需要输入输出的文件·格式
- 固定格式(Fixed):Fortran77，后缀F,f,for,f77
- 自由格式(Free):Fortran90，后缀f90

## Windows下的Fortran编译器
- 可视化编程
> Microsoft Fortran PowerStation 4.0
> Digital Visual Fortran 5.0> Compaq Visual Fortran 6.0~6.6
> Intel Visual Fortran 

## Linux(Unix)系统下的编辑器
- Vi(Vim),Emacs,gVim,gEditor 
 
## Linux (Unix）系统下的编译器
- gfortran 
- Intel 
- Portland Group 
- IBM , SGI , CRAY , SUN , ABSOFT , SALFORD , NAG , Compaq / HP 

## 命令行编译和执行
### 编译命令
- gfortran test . for 自动生成可执行文件名称 a . out 
- pgf90 test .f90- o test . out 自定义可执行文件名称 
- ifort test .f90- o test . exe 
### 运行命令
- ./a.out 
- ./test.out 
- ./test.exe 

## 字符集
字符集是指编写 Fortran 程序时所能使用的所有字符及符号，包括：

|英文26个字母|A ~ Z 及 a ~ z （英文字母大小写不分）|
|------|------|
|数字|0~9|
|22个特殊符号|冒号 ＝等于号 ＋加号 ﹣减号 *星号 ／斜线（左括号 ）右括号 ，逗号 ．句号 '单引号 ！感叹号 "双引号 &和号 ；分号 ＜小于 ＞大于 ？问号 $美元符号 ％百分号 下划线 空格|

## Fortran 程序的主要结构
Fortran 程序通常以 PROGRAM ＋程序名开头以 END 结尾
```
程序开始:PROGRAM MAIN (MAIN 是自定的名称,可以省略)
主程序代码:WRITE (*,*)" Hello "
程序结束:STOP (可以省略)
主程序代码结束:END
``` 

## Fortran 程序编写格式有两种：
- 固定格式（ Fixed Format )如：[ex0301.for]Fortran77的旧式写法，编写格式有很多限制。往往以*.for 或*.f为扩展名
- 自由格式 (Free Format )如：[ex0302.f90]Fortran90后的新写法，取消很多的旧限制。往往以*.f90为扩展名

### 固定格式（ Fixed Format ）
规定了程序代码每一行中每个字段的意义

|第1列|如果是字母 C 、 c 或星号*，这一行文本被当成说明，不编译（注释区）|
|------|------|
|第1-5列|如果是数字，代表这一行程序的编号。否则只能是空格（行号区）|
|第6列|如果是"0"以外的字符，表示这一行接上一行（续行区）
|第7-72列|代码编写区|
|第73列以后|不使用，编译会忽略或出错|


### 自由格式( Free Format )

- 没有规定每一行的第几个字符有什么作用·注意：
- 符号！后面的文本都是注释
- 每行可以编写132个字符
- 行号放在每行程序的最前面
- 一行程序代码的最后如果是符号＆，代表下一行程序会和这一行连接（必要）。如果一行程序代码的开头是符号＆，代表它会和上一行程序连接（非必要）


## Fortran 的数据类型
数据类型是指记录文本、数值等数据的最小单位及方法
1. 整数( INTEGER )
- 长整型(32 bits )
- 短整型(16 bits )

2. 实数(REAL )
- 单精度(32 bits)：有效位数6~7位
- 双精度(64 bits )：有效位数15~16位

3. 复数( COMPLEX )
﹣由两个浮点数（ a + bi ）来表示的数值，分为单精度复数和双精度复数两种。

4. 字符( CHARACTER )
- 记录字母、数字或任何特殊符号
- 记录一连串字符时称为"字符串"

5. 逻辑判断(LOGICAL )
- "是／真"(.TRUE.）和"非／否／假"(.FALSE.)

6. 派生类型
- 基本类型的混合，意义明确，减少数组个数
>不同类型的数据要经过转换才能互通互用，因为它们是用不同方法来存储的

## Fortran 的数学表达式
- 数学运算符号优先级
>(）括号（表示括号起来的部分优先计算）

>**乘幂（两星号要连续）

>*乘法  ／除法 

>+加法   -减法
- 数学表达式写法：
>乘幂要连用两个星号**
>乘号不能省略
>除法用／

## 编译器简介
- 解释语言（如 MATLAB 、 DeIphi 、 Python ）不需要经过编译，在解释器下直接运行。
- 编译器（ Compiler ）可把高级语言（如 Fortran 、 C ）翻译成机器码（即常见扩展名为 EXE 、 COM 的可执行文件）。
- 判别编译器的好坏的因素
1. 翻译正确与否
2. 执行文件运行效率
3. 翻译的执行码长短
4. 编译过程所需时间
5. 调试工具（ Debug ）的完整程度
6. 使用帮助是否清楚等

## vi 编辑器
vi test .f90:生成或打开一个文件
- 工作模式
```
i:进入插入模式，可以进行文字输入
Esc:进入命令模式，可以输入命令
x:删除或剪切
p:粘贴
?:查找
:键:进入末行模式，进行文件管理
w:保存
wq:保存并退出
q!:不保存退出
1人正在看
```

## 输出命令（WRITE、PRINT)
- WRITE 的用法：

 write ( UNIT =6, FMT =*)" string "!严谨的写法

 UNIT:输出位置（*表示默认值，等同于6，代表屏幕）

 FMT:输出格式（*表示不限定格式)write (*,*)" string "！简写方法
- 注意：
>每执行一次 WRITE ，会自动换到下一行
>用双引号或单引号来封装要输出的字符串
>如要输出双引号，则连续使用两个双引号
>可同时输出多个数据，中间用逗号隔开  write (6,*)123,456.0
- 不换行输出：
```
 write (*,'(1x,f8.2,$)')123.
 write (*,'(1x,f8.2)', advance =' no ')123.
 write (*,'(1x,f8.2\)')123.( Linux 下可能不工作）
```

- PRINT 的用法
1. 和 WRITE 大致上相同，但其后面不适用括号，而且只有一个星号（表示不限定输出格式）
2. PRINT 缺少指定输出设备的能力，只针对屏幕来使用
```
 print *," Hello "
 print *,1,2.0," string "
 print *, my _ var 
```
>建议尽量使用 WRITE 语句

## 输入命令（ READ )

- 在程序进行当中接受设备输入数据的命令

  read (unit=5,fmt=*)a ！严谨的写法

  unit:输入设备（*表示默认值，等同于5，代表键盘）

  fmt：输入格式（*表示不赋值输入格式）
- 同一行程序代码一次读入多个数值
 read (*,*) a , b , c 
- 输入时要注意对应的变量类型

- 可以输入字符串，但默认格式可能出错
```
 program ex0419
 character (len=80) a 
 read (*,*) a 
 Happy Birthday 
 write (*,*) a 
 end 
```
- 若输入内容出现空格，输入的字符串会被截断，只能得到第一个字符串的内容·解决方法是用引号封装字符串，或者使用格式化输入输出

## 声明（类型说明）
在程序代码中，向编译器要求预留一些存放数据的内存空间
声明变量的原则：
1. 使用英文字母，可以内含下划线或数字，但开头必须是英文字母
2. Fortran90中变量长度在1~31之间
3. 不要和 Fortran 的执行命令同名，也不能和主程序的名称或是前面声明过的变量同名
4. 变量不分大小写

## 整数类型(INTEGER )
integer a:a是自己取的名字，在程序代码中就以这个名字来表示这一块存放整数的空间。它习惯上称为"变量".integer声明要使用整型数据
- 可以同时声明多个变量，中间用逗号隔开
- 声明了一个整型变量，如果赋值有小数时会忽略不计

1. 长整型（默认）
```
 integer *4 a !Fortran 77传统作法 
 integer (4) b !Fortran 77传统作法
 integer ( kind =4) c !Fortran 90添加
```
2. 短整型
```
 integer *2 a !Fortran 77传统作法 
 integer (2) b !Fortran 77传统作法 
 integer ( kind =2) c !Fortran 90添加
```

## 实数(REAL )
实数和整数的最大不同在于实数可以保存小数
 real a 
1. 单精度（默认）
```
 real *4 a !Fortran 77传统作法
 real (4) b !Fortran 77传统作法 
 real ( kind =4) c !Fortran 90添加
设置一个超大或超小的数值，可使用指数形式，如1E10,1E-10
```
2. 双精度
```
 real *8 a !Fortran 77传统作法
 real (8) b !Fortran 77传统作法
 real ( kind =8) c !Fortran 90添加
设置一个超大或超小的数值，同样使用指数形式，将 E 改成 D 
```

## 函数的参数类型
 sin ( a )、 cos ( a )、 tan ( a ）等函数,log ( a ),sqrt ( a )以上函数中的参数 a 必须声明为实型，计算结果也为实数

## 复数（ COMPLEX )
- 唯一直接提供复数类型的语言
 complex a 
- 复数由实部和虚部两个实数来保存，也可以分成单精度及双精度两种类型
```
 complex ( kind =4) a ！单精度，Fortran 90
 complex( kind =8) b ！双精度，Fortran 90
 complex*4 c ！单精度，Fortran 77
 complex*8 c ！双精度，Fortran 77
 complex(4) d ！单精度，Fortran 77
 complex(8) d ！双精度，Fortran 77
```
- 表示方法
 a =( x , y )  !x为实部，y为虚部，表示a=x+yi 
- 可以进行四则运算
 
## 字符及字符串(CHARACTER )
- 字符类型是用来保存一个字符或一长串字符所组成的"字符串"时所使用的类型。 
character a  !声明一个字符
- 字符串需要声明长度
```
 character (len=10) a !Fortran 90
 character(10) b !Fortran 77
 character*10 c !Fortran 77
 character*(10) d !Fortran 77
```
- 设置字符串变量内容方法
 a ="Hello" !Fortran 90可以用双引号来封装字符串
 b ='Hello' !Fortran 77只能用单引号来封装字符串
 c ="That's right."  !用双引号封装字符串时，可以在字符串中任意使用单引号
 d ="That"sright.'  !用单引号封装字符串时，输出单引号要连续用两个单引号
 e ="That's""right""."  !用双引号封装字符串时，输出双引号也要连用两个双引号
- 字符串内字母区分大小写
- 可以改变字符串的某一部分
- 两个字符串之间还可以使用"//"合并
 
## 字符串函数
- CHAR ( num )
返回数值 num 在 ASCII 字符表中代表的字符
- ICHAR ( char )
返回字符 char 在 ASCII 字符表中的编号
- LEN ( string )
返回字符串 string 的声明长度
- LEN _ TRIM ( string )
返回字符串 string 去除尾端空格后的实际长度
- TRIM ( string )
返回字符串 string 去除尾端空格后的字符串

