## IF 语句
- 流程控制：在程序执行中，视情况来选择是否要执行某一段程序代码
- IF 语句：能够在程序执行当中自动选择转向、跳过某些程序模块来执行程序代码。

### IF 的用法：
1. 一个 IF 模块（或语句）
2. 一个 IF - ELSE 模块
3. 多个 IF 语句嵌套模块
4. 多重判断 IF - ELSE IF 模块

### IF 基本用法
- 一个 IF 模块
```
IF（逻辑判断式） THEN
   ······
   ······
(逻辑成立时，才会执行这里面的程序代码逻辑不成立时，会跳到END IF 之后继续执行)
 END IF 
```
- 如果 IF 模块中只有一行程序代码时，可以把与这行代码写在同一行，并省略 THEN 及 END IF 
 IF （逻辑判断式）.......
```
program ex0501
 implicit none 
 real ( kind =4):: speed 
 write (*,*)" speed :"
 read (*,*) speed 
 if ( speed >100.0) then 
! speed >100时才会执行下面这一行程序
 write (*,*)" Slow down ."
 end if 
 if ( speed <10.0) write (*,*)" Speed up ."
 stop 
 end 
```
- 可以搭配 ELSE ，用来赋值当判断式不成立时，会去执行某一段程序代码
```
 IF(逻辑判断式) THEN
 ······
(逻辑成立时，执行这一段程序代码)
 ELSE 
······
······
(逻辑不成立时，则执行这一段程序代码)
 END IF 
```
```
program ex0502
 implicit none 
 real ( kind =4):: height ！记录身高 real ( kind =4):: weight ！记录体重
 write (*,*)" height :"
 read (*,*) height ！读入身高 write (*,*)" weight :"
 read (*,*) weight ！读入体重
 if ( weight > height -100) then 
！如果体重大于身高减去100，会执行下面的程序
 write (*,*)" Too fat !"
 else 
!如果体重不大于身高减去100，会执行下面的程序
 write (*,*)" Under control ."
 end if 
 stop 
 end 
```

### 逻辑运算
- IF 命令需要搭配逻辑表达式才能使用。
- 逻辑表达式的形式：
1. 两个数字比较大小:（使用逻辑运算符号）
2. 由两个，甚至多个小逻辑表达式组合成（还使用集合运算符号）

#### 逻辑运算符：两个数字比大小
- 逻辑运算符号

|F90以上|F77|说明|
|------|------|------|
|==|.EQ.|判断是否"相等"|
|/=|.NE.|判断是否"不相等"|
|>|.GT.|判断是否"大于"|
|>=|.GE.|判断是否"大于或等于"|
|<|.LT.|判断是否"小于"|
|<=|.LE.|判断是否"小于或等于"|

- 用法
 if(speed.GT.100) then ! Fortran 77
 
 if( speed >100) then ! Fortran 90

- 集合运算符：由两个或多个小的逻辑表达式组合成
- 集合运算符号

|.AND.|交集，如果两边的表达式都成立，整个表达式就成立|
|------|------|
|.OR.|并集，两边的表达式只要有一个成立，整个表达式就成立|
|.NOT.|如果后面的表达式不成立，整个表达式就成立|
|.EQV.|两边表达式的逻辑运算结果相同时，整个表达式就成立| 
|NEQV.|两边表达式的逻辑运算结果不同时，整个表达式就成立|

- 用法
 if(a>=80.and.a<90)then  !不能写作80<=a<90

 if((a>0.and.b>0).or.(a<0.and.b<0))then 

### .AND.
前后两个逻辑条件都成立，整个表达式才会成立

|逻辑 A| 逻辑 B| A . AND . B|
|------|------|------| 
| True| True| True |
| True| False| False| 
|False| True |False |
|False |False |False| 

```
(10>5.and.6<10)！前后两个条件都成立，整个表达式也成立
(10>5.and.10>20)！后面条件不成立，整个表达式不成立
(1>2.and.1>3)！前后条件都不成立，整个表达式不成立
```

### .OR.
前后两个逻辑条件只要有一个成立，整个表达式就成立

|逻辑 A| 逻辑 B| A . OR . B|
|------|------|------| 
| True |True |True |
| True |False|True |
| False|True |True |
| False|False|False| 

```
(1>5.or.2<5)！后面条件成立，整个表达式成立
(3>1.or.2>1)！前后条件都成立，整个表达式成立
(1>5.and.2>5)！前后条件都不成立，整个表达式不成立
```

### .NOT.
把原本的逻辑结果取反
|逻辑 A| .NOT. A|
|------|------| 
| True |False|
| False|True| 

```
(. not .3>5)！后面条件不成立，取反后表达式成立
(. not .1<2)！后面条件成立，取反后表达式不成立
```

### .EQV.
两边逻辑运算结果相同时，整个表达式才会成立

|逻辑 A| 逻辑 B| A.EQV.B|
|------|------|------| 
| True |True |True| 
| True| False| False| 
|False |True |False |
|False |False |True|

```
(1>3.eqv.2>3)！前后条件都不成立，结果相同表达式成立
(1<2.eqv.2<3)！前后条件都成立，结果相同表达式成立
(1<2.eqv.2>3)！前面条件成立，后面条件不成立，结果不同表达式不成立
```
### .NEQV.
两边逻辑运算结果不同时，整个表达式就会成立

|逻辑 A| 逻辑 B| A.NEQV.B|
|------|------|------| 
| True| True| False| 
|True |False|True |
|False| True| True |
|False |False|False |

```
(1>2.neqv.3>2)！前面条件不成立，后面条件成立，结果不同表达式成立
(1>2.neqv.2>3)！前后条件都不成立，结果相同表达式不成立
(1<2.neqv.2<3)！前后条件都成立，结果相同表达式不成立
```

- 逻辑运算可以通过.AND.、.OR.、.NOT.、.EQV. 、.NEQV.混合使用，用括号（）确定运算先后顺序
```
 if ((A>=10).and.(A<=20)) then 
 if ((KEY=='Y').or.(KEY=='y'))then 
 if (.not.(A==10))then 
```
- 以上例子中括号可以省略，但下面例子一定要使用括号
 if((a>0.and.b>0).or.(a<0.and.b<0)) then 

- 程序代码中可以使用逻辑表达式来设置逻辑变量的内容
 logical _ var = A > B [当 A 的数值大于 B 时， logical var 这个逻辑变量会被设定成"真"(. TRUE .),否则会被设定为"假"(. FALSE .)]
- 用法
 if ( logical _ var ) then 


### 多重判断 IF-ELSE IF 
多重判断可以一次列出多个条件及多个程序模块，但是其中最多只有一个条件成立，即最多只有一个程序模块会被执行
```
 if (条件1) then 
条件1成立时，执行这个模块程序
 else if (条件2) then 
条件2成立时，执行这个模块程序
 else i19(条件3) then 
条件3成立时，执行这个模块程序
 else 
 Else 这个模块可以省略
每个条件都不成立时，才执行这个模块程序
 end if 
```

### 浮点数及字符的逻辑运算
#### 浮点数的逻辑判断
- 使用浮点数做逻辑运算时，要避免使用"等于"的判断
- 使用浮点数做计算时，有效位数是有限的，难免会出现计算上的误差，理想中的等号不一定会成立
- 浮点数的计算误差经常会发生，在判断式中要给误差预留一点空间

#### 字符的逻辑判断
- 字符也可比较大小，根据其 ASCII 码值进行比较
```
'a'<'b'！因为a的ASCII码为97,b的ASCII码为98
'A'<'a'！因为A的ASCII码为65,a的ASCII码为97
"abc"<"bcd"！根据字母顺序来比较，字符串"abc"的第1个字符小于字符串"bcd"的第1个字符
'abc'<'bc'！根据字符串中字母顺序比较，长度其次"abc"<"abcd"！根据字母顺序来做比较，两个字符串的前3个字符都一样，但字符串"abcd"比字符串"abc"多了1个字符
```
- 字符串的逻辑运算符：
.>,>=,<,<=,==,/=,.gt.,.ge.,.It.,.le.,.eq.,.ne.


### SELECT CASE 语句
```
 select case （变量）  放入所要判断的变量
 case (值1)
......
变量等于值1时，执行此程序段
 case (值2)
....
变量等于值2时，执行此程序段
 case (值 n )
变量等于值 n 时，执行此程序段
 case default 
变量不等于任何值时，执行此程序段
 end select
``` 

-  CASE DEFAULT 模块并不一定要出现·
- 在 CASE 里的冒号前后放入两个数值时，代表这两个数字范围中的所有数值；还可以用逗号放入多个变量
```
 case (1)！变量＝1时，会执行这个 case 中的程序模块
 case (1:5)!1<＝变量＜=5时，会执行这个 case 中的程序模块 
 case (1:)!1<＝变量时，会执行这个 case 中的程序模块
 case (:5)！变量＜=5时，会执行这个 case 中的程序模块 
 case (1,3,5)！变量＝1或3或5时，会执行这个 case 中的程序模块
```
- 使用 SELECT CASE 来取代某些使用 IF - ELSE IF 的多重语句，会让程序代码看起来比较简洁。
- SELECT CASE 有一些限制：只能使用整数，字符和逻辑变量，不能使用浮点数和复数。每个 case 中所使用的数值必须是固定的常量，不能使用变量。

### 其他流程控制
- GOTO 
1. 古老的"跳转"语句
2. 不建议使用，因为使用 GOTO 编写的程序在结构上会很乱，导致程序代码难以阅读. 
3. GOTO 命令提供任意跳跃到所赋值"行代码"的那一行程序位置来执行的能力
4. GOTQ 所要跳跃的目的地，可以是程序代码中的任何一个有设置"行代码"的地方，这个位置可以在GOTO 命令的前面或是后面
5. 程序代码中可以一次提供好几个跳跃点，根据 GOTO 后面的算式来选择要使用哪一个跳跃点

### IF 与 GOTO 的联用
 IF 判断还有一种叫做算术判断的方法，做法和 GOTO 类似
>c<0时goto 10;c=0时goto 20;c>0时goto 30
 if ( c )10,20,30
 
### PAUSE , CONTINUE , STOP 
- PAUSE ：暂停执行，按 ENTER 键才会继续执行
- CONTINUE ：继续向下执行程序， Fortran 90之后很少使用
- STOP ：结束程序执行

### 二进制的逻辑运算
二进制的逻辑运算中把0当成逻辑上的 FALSE ，把1当成逻辑上的 TRUE ，则有如下结果
```
0.and.0=0  0.and.1=0
1.and.0=0  1.and.1=1
0.or.0=0   0.or.1=1
1.or.0=1   1.or.1=1
```
- F90的库函数 IAND ()、 IOR ()是针对二进制的计算
``` 
 a =2! a 等于二进制的010
 b =4! b 等于二进制的100
 c = iand ( a , b )! c =0，即二进制的000
 d = ior ( a , b )! d =6，即二进制的110
```

- 设置整数进制
```
 integer :: a 
 a = B "10"! a =2，二进制的10相当于十进制的2
 a= O "10"! a =8，八进制的10相当于十进制的8
 a= Z "10"! a =16，十六进制的10相当于十进制的16
```
- 十六进制

0~9, A , B , C , D , E , F 

a = Z '2C'! a =44，十六进制的2C等于十进制的44

